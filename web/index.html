<!doctype html>
<html lang="sv">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Skolplanering Goteborg - POC</title>
    <link rel="stylesheet" href="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.css" />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <header class="topbar">
      <h1>Skolplanering Goteborg</h1>
      <div class="controls">
        <label>Ar
          <select id="yearSelect"></select>
        </label>
        <label>Scenario
          <select id="scenarioSelect">
            <option value="base">Bas</option>
            <option value="low">Lag</option>
            <option value="high">Hog</option>
          </select>
        </label>
        <button id="runPlanningBtn">Kora arsplan</button>
      </div>
    </header>

    <nav class="tabs">
      <button class="tab active" data-tab="overview">Oversikt</button>
      <button class="tab" data-tab="forecast">Prognos</button>
      <button class="tab" data-tab="map">Karta</button>
      <button class="tab" data-tab="planning">Kapacitetsplan</button>
      <button class="tab" data-tab="export">Export</button>
    </nav>

    <main>
      <section id="overview" class="panel active">
        <div class="kpi-grid">
          <article class="kpi-card"><h3>Totalt elevantal</h3><p id="kpiStudents">-</p></article>
          <article class="kpi-card"><h3>Total kapacitet</h3><p id="kpiCapacity">-</p></article>
          <article class="kpi-card"><h3>Belaggning</h3><p id="kpiUtilization">-</p></article>
          <article class="kpi-card"><h3>Overskott/Underskott</h3><p id="kpiSurplus">-</p></article>
        </div>
        <h2>Distriktsbalans</h2>
        <table id="districtTable">
          <thead>
            <tr><th>Distrikt</th><th>Kapacitet</th><th>Efterfragan</th><th>Balans</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </section>

      <section id="forecast" class="panel">
        <h2>Prognos 2026-2036</h2>
        <canvas id="forecastChart" height="120"></canvas>
      </section>

      <section id="map" class="panel">
        <h2>Karta</h2>
        <div id="mapView"></div>
      </section>

      <section id="planning" class="panel">
        <h2>Rekommendationer</h2>
        <div class="constraints">
          <label>Max klassstorlek <input id="classSize" type="number" /></label>
          <label>Max avstand (km) <input id="maxDistance" type="number" step="0.1" /></label>
          <label>Min byggnadsskick <input id="minCondition" type="number" /></label>
          <button id="saveConstraintsBtn">Spara begransningar</button>
        </div>
        <table id="recsTable">
          <thead>
            <tr><th>Atgard</th><th>Distrikt</th><th>Skola</th><th>Effekt elever</th><th>Effekt kapacitet</th><th>Motivering</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </section>

      <section id="export" class="panel">
        <h2>Export</h2>
        <p>Exporterar CSV som kan oppnas i Excel.</p>
        <div class="export-buttons">
          <button data-export="district_capacity">Export Distrikt</button>
          <button data-export="school_utilization">Export Skolor</button>
          <button data-export="recommendations">Export Rekommendationer</button>
        </div>
      </section>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <script src="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.js"></script>
    <script src="/app.js"></script>
  </body>
</html>
